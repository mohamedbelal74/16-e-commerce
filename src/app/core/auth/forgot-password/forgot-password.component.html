<section class="mt-20">
  <div class="container max-w-lg mx-auto space-y-8">

    <ol
      class="flex items-center w-full p-3 space-x-2 text-sm font-medium text-center text-gray-500 bg-white border border-gray-200 rounded-lg shadow-xs sm:text-base sm:p-4 sm:space-x-4 rtl:space-x-reverse">
      <li [class.text-green-600]="step === 1" class="flex items-center">
        <span [class.text-green-600]="step === 1" [class.border-green-600]="step === 1"
          class="flex items-center justify-center w-5 h-5 me-2 text-xs border rounded-full shrink-0">
          1
        </span>
        Verify <span class="hidden sm:inline-flex sm:ms-2">Email</span>
        <svg class="w-3 h-3 ms-2 sm:ms-4 rtl:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 12 10">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="m7 9 4-4-4-4M1 9l4-4-4-4" />
        </svg>
      </li>
      <li [class.text-green-600]="step === 2" class="flex items-center">
        <span [class.text-green-600]="step === 2" [class.border-green-600]="step === 2"
          class="flex items-center justify-center w-5 h-5 me-2 text-xs border border-gray-500 rounded-full shrink-0">
          2
        </span>
        Verify <span class="hidden sm:inline-flex sm:ms-2">Code</span>
        <svg class="w-3 h-3 ms-2 sm:ms-4 rtl:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none"
          viewBox="0 0 12 10">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="m7 9 4-4-4-4M1 9l4-4-4-4" />
        </svg>
      </li>
      <li [class.text-green-600]="step === 3" class="flex items-center">
        <span [class.text-green-600]="step === 3" [class.border-green-600]="step === 3"
          class="flex items-center justify-center w-5 h-5 me-2 text-xs border border-gray-500 rounded-full shrink-0">
          3
        </span>
        Reset Password
      </li>
    </ol>

   
    @if (step === 1) {
      <form [formGroup]="verifyEmail" (ngSubmit)="formStep1()"
        class="bg-white shadow-md rounded-lg p-6 border border-gray-200">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">Verify Email</h2>
        <div class="mb-4">
          @let emailControls = verifyEmail.controls['email'];
          <label for="email" class="block mb-2 text-sm font-medium text-gray-700">Email</label>
          <input id="email" type="email" formControlName="email" placeholder="Enter your email"
            class="bg-gray-50 border text-sm rounded-lg block w-full p-2.5 transition-colors duration-200 
                   border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 focus:outline-none"
            [class.border-green-600]="emailControls?.valid"
            [class.border-red-600]="emailControls?.invalid && emailControls?.touched" />
          @if (emailControls.errors && emailControls.touched) {
            <div class="mt-2 p-3 text-sm text-red-700 rounded-lg bg-red-50 border border-red-200">
              <ul class="list-disc list-inside space-y-1">
                @if (emailControls.hasError('required')) { <li>Email is required</li> }
                @if (emailControls.hasError('email')) { <li>Please enter a valid email</li> }
              </ul>
            </div>
          }
        </div>
        <button type="submit"
          class="w-full bg-green-600 text-white py-2 px-4 rounded-lg shadow hover:bg-green-700 transition">
          Verify Email
        </button>
      </form>
    } @else if (step === 2) {
 
      <form [formGroup]="verifyCode" (ngSubmit)="formStep2()"
        class="bg-white shadow-md rounded-lg p-6 border border-gray-200">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">Enter Reset Code</h2>
        <div class="mb-4">
          @let codeControls = verifyCode.controls['resetCode'];
          <label for="resetCode" class="block mb-2 text-sm font-medium text-gray-700">Reset Code</label>
          <input id="resetCode" type="text" formControlName="resetCode" placeholder="Enter the code sent to your email"
            class="bg-gray-50 border text-sm rounded-lg block w-full p-2.5 transition-colors duration-200 
                   border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 focus:outline-none"
            [class.border-green-600]="codeControls?.valid"
            [class.border-red-600]="codeControls?.invalid && codeControls?.touched" />
          @if (codeControls.errors && codeControls.touched) {
            <div class="mt-2 p-3 text-sm text-red-700 rounded-lg bg-red-50 border border-red-200">
              <ul class="list-disc list-inside space-y-1">
                @if (codeControls.hasError('required')) { <li>Reset code is required</li> }
              </ul>
            </div>
          }
        </div>
        <button type="submit"
          class="w-full bg-green-600 text-white py-2 px-4 rounded-lg shadow hover:bg-green-700 transition">
          Verify Code
        </button>
      </form>
    } @else if (step === 3) {
    
      <form [formGroup]="resetPassword" (ngSubmit)="formStep3()"
        class="bg-white shadow-md rounded-lg p-6 border border-gray-200">
        <h2 class="text-lg font-semibold text-gray-800 mb-4">Reset Password</h2>

     
        <div class="mb-4">
          @let resetEmailControls = resetPassword.controls['email'];
          <label for="resetEmail" class="block mb-2 text-sm font-medium text-gray-700">Email</label>
          <input id="resetEmail" type="email" formControlName="email" placeholder="Enter your email again"
            class="bg-gray-50 border text-sm rounded-lg block w-full p-2.5 transition-colors duration-200 
                   border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 focus:outline-none"
            [class.border-green-600]="resetEmailControls?.valid"
            [class.border-red-600]="resetEmailControls?.invalid && resetEmailControls?.touched" />
          @if (resetEmailControls.errors && resetEmailControls.touched) {
            <div class="mt-2 p-3 text-sm text-red-700 rounded-lg bg-red-50 border border-red-200">
              <ul class="list-disc list-inside space-y-1">
                @if (resetEmailControls.hasError('required')) { <li>Email is required</li> }
                @if (resetEmailControls.hasError('email')) { <li>Please enter a valid email</li> }
              </ul>
            </div>
          }
        </div>

   
        <div class="mb-4">
          @let passwordControls = resetPassword.controls['newPassword'];
          <label for="newPassword" class="block mb-2 text-sm font-medium text-gray-700">New Password</label>
          <input id="newPassword" type="password" formControlName="newPassword" placeholder="Enter new password"
            class="bg-gray-50 border text-sm rounded-lg block w-full p-2.5 transition-colors duration-200 
                   border-gray-300 focus:ring-2 focus:ring-green-500 focus:border-green-500 focus:outline-none"
            [class.border-green-600]="passwordControls?.valid"
            [class.border-red-600]="passwordControls?.invalid && passwordControls?.touched" />
          @if (passwordControls.errors && passwordControls.touched) {
            <div class="mt-2 p-3 text-sm text-red-700 rounded-lg bg-red-50 border border-red-200">
              <ul class="list-disc list-inside space-y-1">
                @if (passwordControls.hasError('required')) { <li>Password is required</li> }
                @if (passwordControls.hasError('pattern')) { <li>Password must be at least 6 characters</li> }
              </ul>
            </div>
          }
        </div>

        <button type="submit"
          class="w-full bg-green-600 text-white py-2 px-4 rounded-lg shadow hover:bg-green-700 transition">
          Reset Password
        </button>
      </form>
    }
  </div>
</section>
