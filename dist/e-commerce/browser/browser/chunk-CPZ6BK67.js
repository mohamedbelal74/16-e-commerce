import{a as q}from"./chunk-NRV5PKAH.js";import{a as P,b as f,c as A,d as G,e as j,f as k,h as D,i as R,k as $,n as z}from"./chunk-FDJINMMM.js";import{a as M}from"./chunk-5TUTK4RD.js";import{f as V,g as I}from"./chunk-GUJGMTCI.js";import{Cb as C,Eb as g,Na as r,Nb as h,Pb as s,Qb as F,Ua as v,Wb as w,Xb as y,Yb as L,Z as S,Za as E,cb as T,da as _,ea as x,lb as m,mb as c,qb as p,rb as i,sb as n,tb as u,zb as b,zc as N}from"./chunk-7JRWEJT7.js";function H(e,t){if(e&1){let o=b();i(0,"div",2)(1,"div",17),u(2,"i",18),n(),i(3,"div",19),s(4),n(),i(5,"button",20),C("click",function(){_(o);let a=g(2);return x(a.showToast=!1)}),u(6,"i",21),n()()}if(e&2){let o=g(2);r(4),F(o.errorMsg)}}function J(e,t){if(e&1&&T(0,H,7,1,"div",16),e&2){let o=g();p("ngIf",o.showToast)}}function K(e,t){e&1&&(i(0,"li"),s(1,"Email is required"),n())}function O(e,t){e&1&&(i(0,"li"),s(1,"Please enter a valid email"),n())}function Q(e,t){if(e&1&&(i(0,"div",6)(1,"ul",22),m(2,K,2,0,"li"),m(3,O,2,0,"li"),n()()),e&2){g();let o=L(6);r(2),c(o.hasError("required")?2:-1),r(),c(o.hasError("email")?3:-1)}}function U(e,t){e&1&&u(0,"i",11)}function W(e,t){e&1&&u(0,"i",12)}function X(e,t){e&1&&(i(0,"li"),s(1,"Password is required"),n())}function Y(e,t){e&1&&(i(0,"li"),s(1,"Minimum 6 characters"),n())}function Z(e,t){if(e&1&&(i(0,"div",6)(1,"ul",22),m(2,X,2,0,"li"),m(3,Y,2,0,"li"),n()()),e&2){g();let o=L(12);r(2),c(o.hasError("required")?2:-1),r(),c(o.hasError("minlength")?3:-1)}}function ee(e,t){e&1&&u(0,"i",14)}var B=class e{constructor(t,o){this.auth=t;this.router=o}isLoading=!1;errorMsg="";showToast=!1;flag=!1;cookieService=S(M);loginForm=new j({email:new k(null,[f.required,f.email]),password:new k(null,[f.required,f.pattern(/^\w{6,}$/)])});submit(){this.loginForm.valid?(this.isLoading=!0,this.auth.login(this.loginForm.value).subscribe({next:t=>{this.isLoading=!1,this.cookieService.set("token",t.token),t.user&&t.user._id&&this.cookieService.set("userId",t.user._id),this.router.navigate(["/home"])},error:t=>{this.isLoading=!1,this.errorMsg=t.error?.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627",this.showToast=!0,setTimeout(()=>this.showToast=!1,8e3)}})):this.loginForm.markAllAsTouched()}static \u0275fac=function(o){return new(o||e)(v(q),v(V))};static \u0275cmp=E({type:e,selectors:[["app-login"]],decls:25,vars:18,consts:[[1,"text-4xl","text-center","my-3","text-green-600","mt-20","font-bold","drop-shadow-md"],[1,"w-[80%]","p-5","mx-auto","shadow-md","rounded-md",3,"ngSubmit","formGroup"],["id","toast-danger","role","alert",1,"flex","items-center","w-full","max-w-xs","p-4","mb-4","text-gray-500","bg-red-200","rounded-lg","shadow-sm","dark:text-gray-400","dark:bg-gray-800"],[1,"mb-2"],["for","email",1,"block","mb-2","text-sm","font-medium"],["id","email","type","email","formControlName","email",1,"bg-white","border","text-sm","rounded-lg","block","w-full","p-2.5","transition-colors","duration-200","border-gray-300","focus:ring-2","focus:ring-green-500","focus:outline-none"],[1,"mt-2","p-3","text-sm","text-red-700","rounded-lg","bg-red-50","border","border-red-200"],[1,"mb-2","relative"],["for","password",1,"block","mb-2","text-sm","font-medium"],["id","password","formControlName","password",1,"bg-white","border","text-sm","rounded-lg","block","w-full","p-2.5","pr-10","transition-colors","duration-200","border-gray-300","focus:ring-2","focus:ring-green-500","focus:outline-none",3,"type"],[1,"absolute","right-3","top-[38px]","cursor-pointer","text-gray-500",3,"click"],[1,"fas","fa-eye-slash"],[1,"fas","fa-eye"],["type","submit",1,"btn-main",3,"disabled"],[1,"fa-solid","fa-spinner","fa-spin"],["routerLink","/forgot",1,"text-sky-600","cursor-pointer"],["id","toast-danger","class","flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-red-200 rounded-lg shadow-sm dark:text-gray-400 dark:bg-gray-800","role","alert",4,"ngIf"],[1,"inline-flex","items-center","justify-center","shrink-0","w-8","h-8","text-red-500","bg-red-300","rounded-lg","dark:bg-red-800","dark:text-red-200"],[1,"fa-solid","fa-arrow-right"],[1,"ms-3","text-sm","font-normal"],["type","button",1,"ms-auto","-mx-1.5","-my-1.5","bg-white","text-gray-400","hover:text-gray-900","rounded-lg","focus:ring-2","focus:ring-gray-300","p-0.5","hover:bg-gray-100","inline-flex","items-center","justify-center","h-8","w-8","dark:text-gray-500","dark:hover:text-white","dark:bg-gray-800","dark:hover:bg-gray-700",3,"click"],[1,"fa-solid","fa-square-xmark","text-red-500"],[1,"list-disc","list-inside","space-y-1"]],template:function(o,l){if(o&1){let a=b();i(0,"section")(1,"h2",0),s(2,"Login Now"),n(),i(3,"form",1),C("ngSubmit",function(){return _(a),x(l.submit())}),m(4,J,1,1,"div",2),i(5,"div",3),w(6),i(7,"label",4),s(8,"Email"),n(),u(9,"input",5),m(10,Q,4,2,"div",6),n(),i(11,"div",7),w(12),i(13,"label",8),s(14,"Password"),n(),u(15,"input",9),i(16,"span",10),C("click",function(){return _(a),x(l.flag=!l.flag)}),m(17,U,1,0,"i",11)(18,W,1,0,"i",12),n(),m(19,Z,4,2,"div",6),n(),i(20,"button",13),s(21," Login "),m(22,ee,1,0,"i",14),n(),i(23,"a",15),s(24,"forgot Password?"),n()()()}if(o&2){r(3),p("formGroup",l.loginForm),r(),c(l.errorMsg!=""?4:-1),r(2);let a=y(l.loginForm.controls.email);r(3),h("border-green-600",a==null?null:a.valid)("border-red-600",(a==null?null:a.invalid)&&(a==null?null:a.touched)),r(),c(a.errors&&a.touched?10:-1),r(2);let d=y(l.loginForm.controls.password);r(3),h("border-green-600",d==null?null:d.valid)("border-red-600",(d==null?null:d.invalid)&&(d==null?null:d.touched)),p("type",l.flag?"text":"password"),r(2),c(l.flag?17:18),r(2),c(d.errors&&d.touched?19:-1),r(),p("disabled",l.isLoading),r(2),c(l.isLoading?22:-1)}},dependencies:[z,D,P,A,G,R,$,N,I],encapsulation:2})};export{B as LoginComponent};
