import{a as O}from"./chunk-HXSOCKRO.js";import{a as j}from"./chunk-MNBUXWPO.js";import"./chunk-5TUTK4RD.js";import{g as T}from"./chunk-GUJGMTCI.js";import{Cb as f,Dc as E,Eb as d,Ka as C,Na as o,Pb as l,Qb as h,Rb as m,Z as _,Za as y,_b as w,cb as v,da as u,dc as I,ea as x,fc as S,qb as s,rb as r,sb as e,tb as g,yc as D,zb as b,zc as k}from"./chunk-7JRWEJT7.js";var P=n=>["/checkout",n];function L(n,a){n&1&&(r(0,"div",5),l(1," Loading your cart... "),e())}function V(n,a){if(n&1&&(r(0,"div",6),l(1),e()),n&2){let t=d();o(),m(" ",t.error," ")}}function B(n,a){n&1&&(r(0,"div",7),l(1," Your cart is empty \u{1F6D2} "),e())}function N(n,a){if(n&1){let t=b();r(0,"div",19)(1,"div",20),g(2,"img",21),e(),r(3,"div",22)(4,"h3",23),l(5),I(6,"term"),e(),r(7,"div",24)(8,"div",25)(9,"button",26),f("click",function(){let c=u(t).$implicit,p=d(2);return x(p.updateCartCount(c.product._id,c.count-1))}),g(10,"i",27),e(),r(11,"span",28),l(12),e(),r(13,"button",26),f("click",function(){let c=u(t).$implicit,p=d(2);return x(p.updateCartCount(c.product._id,c.count+1))}),g(14,"i",29),e(),r(15,"button",30),f("click",function(){let c=u(t).$implicit,p=d(2);return x(p.removeItem(c.product._id))}),g(16,"i",31),e()(),r(17,"div",32),l(18),e()()()()}if(n&2){let t=a.$implicit;o(2),s("src",t.product.imageCover,C),o(3),m(" ",S(6,4,t.product.title,3)," "),o(7),h(t.count),o(6),m(" ",t.price*t.count," EGP ")}}function U(n,a){if(n&1&&(r(0,"div",8)(1,"div",9)(2,"div",10)(3,"h1",11),l(4,"Cart"),e(),r(5,"span",12),l(6),e()(),v(7,N,19,7,"div",13),e(),r(8,"div",14)(9,"h2",15),l(10," Order Summary "),e(),r(11,"div",16)(12,"h3"),l(13,"Total"),e(),r(14,"h4",17),l(15),e()(),r(16,"button",18),l(17," Proceed To Checkout "),e()()()),n&2){let t=d();o(6),m(" ",t.cartDetails.products.length," "),o(),s("ngForOf",t.cartDetails.products)("ngForTrackBy",t.trackByProductId),o(8),m(" ",t.cartDetails.totalCartPrice," EGP "),o(),s("routerLink",w(5,P,t.cartDetails._id))}}var F=class n{cartService=_(j);cartDetails=null;loading=!0;error=null;ngOnInit(){this.getLogedUserData()}getLogedUserData(){this.loading=!0,this.cartService.getLoggedUserCart().subscribe({next:a=>{this.cartDetails=a.data,this.cartService.setCartCount(a.numOfCartItems),this.loading=!1},error:a=>{console.log(a),this.error="Failed to load cart",this.loading=!1}})}removeItem(a){this.cartService.removeSpecificCartItem(a).subscribe({next:t=>{this.cartDetails=t.data,this.cartService.setCartCount(t.numOfCartItems)},error:t=>console.log(t)})}updateCartCount(a,t){t<=0||this.cartService.updateCartCount(a,t).subscribe({next:i=>{this.cartDetails=i.data,this.cartService.setCartCount(i.numOfCartItems)},error:i=>console.log(i)})}trackByProductId(a,t){return t.product._id}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["app-cart"]],decls:5,vars:4,consts:[[1,"p-4","sm:p-6","mt-20"],["class","text-center text-gray-500 py-10",4,"ngIf"],["class","text-center text-red-500 py-10",4,"ngIf"],["class","text-center text-gray-600 py-10",4,"ngIf"],["class","container grid grid-cols-1 lg:grid-cols-12 gap-6 lg:gap-10",4,"ngIf"],[1,"text-center","text-gray-500","py-10"],[1,"text-center","text-red-500","py-10"],[1,"text-center","text-gray-600","py-10"],[1,"container","grid","grid-cols-1","lg:grid-cols-12","gap-6","lg:gap-10"],[1,"lg:col-span-8","bg-white","p-4","sm:p-6","rounded-2xl","shadow-md"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-xl","sm:text-2xl","font-semibold","text-gray-800"],[1,"text-yellow-500","font-medium","text-2xl","sm:text-3xl"],["class","grid grid-cols-1 sm:grid-cols-12 gap-4 bg-gray-50 p-4 rounded-xl shadow-sm items-center mb-4",4,"ngFor","ngForOf","ngForTrackBy"],[1,"lg:col-span-4","bg-white","dark:bg-gray-800","p-4","sm:p-6","rounded-2xl","shadow-md","mt-6","lg:mt-0","lg:sticky","lg:top-24","h-fit"],[1,"text-lg","sm:text-xl","font-semibold","border-b","pb-3","mb-4","text-gray-800","dark:text-gray-100"],[1,"flex","items-center","justify-between","text-base","sm:text-lg","font-bold","text-gray-900","dark:text-gray-100","border-t","pt-3"],[1,"text-green-700"],[1,"w-full","mt-6","bg-green-600","hover:bg-green-700","text-white","font-medium","py-3","rounded-xl","shadow","transition",3,"routerLink"],[1,"grid","grid-cols-1","sm:grid-cols-12","gap-4","bg-gray-50","p-4","rounded-xl","shadow-sm","items-center","mb-4"],[1,"sm:col-span-3","flex","justify-center","sm:justify-start"],["alt","Product",1,"w-28","h-28","sm:w-[60%]","sm:h-28","object-cover","rounded-lg",3,"src"],[1,"sm:col-span-9","flex","flex-col","justify-between"],[1,"text-base","sm:text-lg","font-medium","text-gray-800","mb-2","sm:mb-0"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","mt-2","gap-3"],[1,"flex","items-center","justify-center","sm:justify-start","space-x-3"],[1,"w-8","h-8","flex","items-center","justify-center","rounded-full","bg-gray-200","hover:bg-green-200","transition",3,"click"],[1,"fas","fa-minus","text-gray-700"],[1,"font-semibold","text-gray-800"],[1,"fas","fa-plus","text-gray-700"],[1,"ml-2","w-8","h-8","flex","items-center","justify-center","rounded-full","bg-red-100","hover:bg-red-200","transition",3,"click"],[1,"fas","fa-trash","text-red-600"],[1,"text-center","sm:text-right","text-lg","font-bold","text-green-600"]],template:function(t,i){t&1&&(r(0,"section",0),v(1,L,2,0,"div",1)(2,V,2,1,"div",2)(3,B,2,0,"div",3)(4,U,18,7,"div",4),e()),t&2&&(o(),s("ngIf",i.loading),o(),s("ngIf",!i.loading&&i.error),o(),s("ngIf",!i.loading&&i.cartDetails&&(i.cartDetails.products==null?null:i.cartDetails.products.length)===0),o(),s("ngIf",!i.loading&&i.cartDetails&&i.cartDetails.products.length>0))},dependencies:[E,D,k,T,O],encapsulation:2})};export{F as CartComponent};
