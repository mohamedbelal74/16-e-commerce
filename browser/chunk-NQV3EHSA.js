import{a as I}from"./chunk-NRV5PKAH.js";import{a as G,b as c,c as D,d as j,e as $,f as h,h as z,i as B,k as H,n as J}from"./chunk-FDJINMMM.js";import"./chunk-5TUTK4RD.js";import{f as A}from"./chunk-GUJGMTCI.js";import{Cb as w,Dc as V,Eb as _,Na as n,Nb as y,Pb as d,Qb as M,Ua as T,Wb as E,Xb as S,Yb as R,Za as L,cb as N,da as b,ea as v,lb as l,mb as s,qb as C,rb as t,sb as o,tb as m,zb as k,zc as q}from"./chunk-7JRWEJT7.js";function O(e,i){if(e&1){let a=k();t(0,"div",2)(1,"div",22),m(2,"i",23),o(),t(3,"div",24),d(4),o(),t(5,"button",25),w("click",function(){b(a);let u=_(2);return v(u.showToast=!1)}),m(6,"i",26),o()()}if(e&2){let a=_(2);n(4),M(a.errorMsg)}}function Q(e,i){if(e&1&&N(0,O,7,1,"div",21),e&2){let a=_();C("ngIf",a.showToast)}}function U(e,i){e&1&&(t(0,"li"),d(1,"Name is required"),o())}function W(e,i){e&1&&(t(0,"li"),d(1,"Minimum 3 characters"),o())}function X(e,i){e&1&&(t(0,"li"),d(1,"Maximum 20 characters"),o())}function Y(e,i){if(e&1&&(t(0,"div",6)(1,"ul",27),l(2,U,2,0,"li"),l(3,W,2,0,"li"),l(4,X,2,0,"li"),o()()),e&2){_();let a=R(6);n(2),s(a.hasError("required")?2:-1),n(),s(a.hasError("minlength")?3:-1),n(),s(a.hasError("maxlength")?4:-1)}}function Z(e,i){e&1&&(t(0,"li"),d(1,"Email is required"),o())}function ee(e,i){e&1&&(t(0,"li"),d(1,"Enter a valid email"),o())}function te(e,i){if(e&1&&(t(0,"div",6)(1,"ul",27),l(2,Z,2,0,"li"),l(3,ee,2,0,"li"),o()()),e&2){_();let a=R(12);n(2),s(a.hasError("required")?2:-1),n(),s(a.hasError("email")?3:-1)}}function ie(e,i){e&1&&m(0,"i",11)}function ne(e,i){e&1&&m(0,"i",12)}function oe(e,i){e&1&&(t(0,"li"),d(1,"Password is required"),o())}function re(e,i){e&1&&(t(0,"li"),d(1,"Minimum 6 characters"),o())}function ae(e,i){if(e&1&&(t(0,"div",6)(1,"ul",27),l(2,oe,2,0,"li"),l(3,re,2,0,"li"),o()()),e&2){_();let a=R(18);n(2),s(a.hasError("required")?2:-1),n(),s(a.hasError("minlength")?3:-1)}}function le(e,i){e&1&&m(0,"i",11)}function se(e,i){e&1&&m(0,"i",12)}function de(e,i){e&1&&(t(0,"div",6)(1,"ul",27)(2,"li"),d(3,"Passwords do not match"),o()()())}function me(e,i){e&1&&(t(0,"li"),d(1,"Phone is required"),o())}function ce(e,i){e&1&&(t(0,"li"),d(1,"Enter a valid Egyptian phone number"),o())}function ue(e,i){if(e&1&&(t(0,"div",6)(1,"ul",27),l(2,me,2,0,"li"),l(3,ce,2,0,"li"),o()()),e&2){_();let a=R(35);n(2),s(a.hasError("required")?2:-1),n(),s(a.hasError("pattern")?3:-1)}}function ge(e,i){e&1&&m(0,"i",20)}var K=class e{constructor(i,a){this.auth=i;this.router=a}isLoading=!1;errorMsg="";showToast=!1;flag=!0;sign=!0;registerForm=new $({name:new h(null,[c.required,c.minLength(3),c.maxLength(20)]),email:new h(null,[c.required,c.email]),password:new h(null,[c.required,c.minLength(6)]),rePassword:new h(null),phone:new h(null,[c.required,c.pattern(/^01[0-2,5]{1}[0-9]{8}$/)])},this.confirmPassword);submit(){this.registerForm.valid?(console.log(this.registerForm.value),this.isLoading=!0,this.auth.register(this.registerForm.value).subscribe({next:i=>{console.log(i),this.isLoading=!1,this.router.navigate(["/login"])},error:i=>{console.log(i),this.isLoading=!1,this.errorMsg=i.error.message||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627",this.showToast=!0,setTimeout(()=>{this.showToast=!1},8e3)}})):this.registerForm.markAllAsTouched()}confirmPassword(i){let a=i.get("password")?.value,r=i.get("rePassword")?.value;return a===r?null:{misMatch:!0}}static \u0275fac=function(a){return new(a||e)(T(I),T(A))};static \u0275cmp=L({type:e,selectors:[["app-register"]],decls:43,vars:33,consts:[[1,"text-4xl","text-center","my-3","text-green-600","mt-20","font-bold","drop-shadow-lg"],[1,"w-[80%]","p-5","mx-auto","shadow-md","rounded-md",3,"ngSubmit","formGroup"],["id","toast-danger","role","alert",1,"flex","items-center","w-full","max-w-xs","p-4","mb-4","text-gray-500","bg-red-200","rounded-lg","shadow-sm","dark:text-gray-400","dark:bg-gray-800"],[1,"mb-4"],["for","name",1,"block","mb-2","text-sm","font-medium","text-gray-700"],["id","name","type","text","formControlName","name",1,"bg-white","border","text-sm","rounded-lg","block","w-full","p-2.5","transition-colors","duration-200","border-gray-300","focus:ring-2","focus:ring-green-500","focus:outline-none"],[1,"mt-2","p-3","text-sm","text-red-700","rounded-lg","bg-red-50","border","border-red-200"],["for","email",1,"block","mb-2","text-sm","font-medium","text-gray-700"],["id","email","type","email","formControlName","email",1,"bg-white","border","text-sm","rounded-lg","block","w-full","p-2.5","transition-colors","duration-200","border-gray-300","focus:ring-2","focus:ring-green-500","focus:outline-none"],["for","password",1,"block","mb-2","relative","text-sm","font-medium","text-gray-700"],[1,"absolute","right-3","top-[38px]","cursor-pointer","text-gray-500",3,"click"],[1,"fas","fa-eye"],[1,"fas","fa-eye-slash"],["id","password","formControlName","password",1,"bg-white","border","text-sm","rounded-lg","block","w-full","p-2.5","transition-colors","duration-200","border-gray-300","focus:ring-2","focus:ring-green-500","focus:outline-none",3,"type"],[1,"mb-4","relative"],["for","rePassword",1,"block","mb-2","text-sm","font-medium","text-gray-700"],["id","rePassword","formControlName","rePassword",1,"bg-white","border","text-sm","rounded-lg","block","w-full","p-2.5","pr-10","transition-colors","duration-200","border-gray-300","focus:ring-2","focus:ring-green-500","focus:outline-none",3,"type"],["for","phone",1,"block","mb-2","text-sm","font-medium","text-gray-700"],["id","phone","type","tel","formControlName","phone",1,"bg-white","border","text-sm","rounded-lg","block","w-full","p-2.5","transition-colors","duration-200","border-gray-300","focus:ring-2","focus:ring-green-500","focus:outline-none"],["type","submit",1,"btn-main",3,"disabled"],[1,"fa-solid","fa-spinner","fa-spin"],["id","toast-danger","class","flex items-center w-full max-w-xs p-4 mb-4 text-gray-500 bg-red-200 rounded-lg shadow-sm dark:text-gray-400 dark:bg-gray-800","role","alert",4,"ngIf"],[1,"inline-flex","items-center","justify-center","shrink-0","w-8","h-8","text-red-500","bg-red-300","rounded-lg","dark:bg-red-800","dark:text-red-200"],[1,"fa-solid","fa-arrow-right"],[1,"ms-3","text-sm","font-normal"],["type","button",1,"ms-auto","-mx-1.5","-my-1.5","bg-white","text-gray-400","hover:text-gray-900","rounded-lg","focus:ring-2","focus:ring-gray-300","p-0.5","hover:bg-gray-100","inline-flex","items-center","justify-center","h-8","w-8","dark:text-gray-500","dark:hover:text-white","dark:bg-gray-800","dark:hover:bg-gray-700",3,"click"],[1,"fa-solid","fa-square-xmark","text-red-500"],[1,"list-disc","list-inside","space-y-1"]],template:function(a,r){if(a&1){let u=k();t(0,"section")(1,"h2",0),d(2,"Register Now"),o(),t(3,"form",1),w("ngSubmit",function(){return b(u),v(r.submit())}),l(4,Q,1,1,"div",2),t(5,"div",3),E(6),t(7,"label",4),d(8,"Name"),o(),m(9,"input",5),l(10,Y,5,3,"div",6),o(),t(11,"div",3),E(12),t(13,"label",7),d(14,"Email"),o(),m(15,"input",8),l(16,te,4,2,"div",6),o(),t(17,"div",3),E(18),t(19,"label",9),d(20," Password "),t(21,"span",10),w("click",function(){return b(u),v(r.flag=!r.flag)}),l(22,ie,1,0,"i",11)(23,ne,1,0,"i",12),o()(),m(24,"input",13),l(25,ae,4,2,"div",6),o(),t(26,"div",14)(27,"label",15),d(28," Confirm Password "),o(),m(29,"input",16),t(30,"span",10),w("click",function(){return b(u),v(r.sign=!r.sign)}),l(31,le,1,0,"i",11)(32,se,1,0,"i",12),o(),l(33,de,4,0,"div",6),o(),t(34,"div",3),E(35),t(36,"label",17),d(37,"Phone"),o(),m(38,"input",18),l(39,ue,4,2,"div",6),o(),t(40,"button",19),d(41," Register "),l(42,ge,1,0,"i",20),o()()()}if(a&2){let u,x,F;n(3),C("formGroup",r.registerForm),n(),s(r.errorMsg!=""?4:-1),n(2);let g=S(r.registerForm.controls.name);n(3),y("border-green-600",g==null?null:g.valid)("border-red-600",(g==null?null:g.invalid)&&(g==null?null:g.touched)),n(),s(g.errors&&g.touched?10:-1),n(2);let p=S(r.registerForm.controls.email);n(3),y("border-green-600",p==null?null:p.valid)("border-red-600",(p==null?null:p.invalid)&&(p==null?null:p.touched)),n(),s(p.errors&&p.touched?16:-1),n(2);let P=S(r.registerForm.controls.password);n(4),s(r.flag?22:23),n(2),C("type",r.flag?"password":"text"),n(),s(P.errors&&P.touched?25:-1),n(4),y("border-green-600",!(r.registerForm.errors!=null&&r.registerForm.errors.misMatch)&&((u=r.registerForm.get("rePassword"))==null?null:u.valid))("border-red-600",(r.registerForm.errors==null?null:r.registerForm.errors.misMatch)&&((x=r.registerForm.get("rePassword"))==null?null:x.touched)),C("type",r.sign?"password":"text"),n(2),s(r.sign?31:32),n(2),s(r.registerForm.errors!=null&&r.registerForm.errors.misMatch&&((F=r.registerForm.get("rePassword"))!=null&&F.touched)?33:-1),n(2);let f=S(r.registerForm.controls.phone);n(3),y("border-green-600",f==null?null:f.valid)("border-red-600",(f==null?null:f.invalid)&&(f==null?null:f.touched)),n(),s(f.errors&&f.touched?39:-1),n(),C("disabled",r.isLoading),n(2),s(r.isLoading?42:-1)}},dependencies:[J,z,G,D,j,B,H,V,q],encapsulation:2})};export{K as RegisterComponent};
