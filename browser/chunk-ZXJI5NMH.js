import{a as D}from"./chunk-MNBUXWPO.js";import"./chunk-5TUTK4RD.js";import{$b as w,Cb as _,Cc as k,Dc as E,Eb as c,Na as l,Pb as o,Qb as b,Rb as a,Z as g,Za as y,ac as h,cb as m,da as v,dc as O,ea as f,fa as x,fc as C,qb as d,rb as i,sb as n,tb as p,xc as I,yc as A,zb as u,zc as S}from"./chunk-7JRWEJT7.js";var B=(r,t,e)=>({"bg-green-100 text-green-800":r,"bg-yellow-100 text-yellow-800":t,"bg-red-100 text-red-800":e}),N=(r,t)=>({"bg-green-50 text-green-700":r,"bg-gray-50 text-gray-700":t});function M(r,t){r&1&&(i(0,"div",6)(1,"p",7),o(2,"No orders found."),n()())}function V(r,t){r&1&&(x(),i(0,"svg",24),p(1,"path",25),n())}function j(r,t){r&1&&(x(),i(0,"svg",24),p(1,"path",26),n())}function G(r,t){r&1&&p(0,"div",27)}function $(r,t){if(r&1){let e=u();i(0,"div",8)(1,"div",9)(2,"div",10)(3,"div")(4,"span",11),o(5,"Order"),n(),i(6,"span",12),o(7),n()(),p(8,"div",13),i(9,"div",14)(10,"div"),o(11," Customer: "),i(12,"span",15),o(13),n()(),i(14,"div",16),o(15),n()()(),i(16,"div",17)(17,"span",18),o(18),n(),i(19,"span",18),o(20),n(),i(21,"div",19)(22,"div",11),o(23,"Total"),n(),i(24,"div",20),o(25),O(26,"number"),n()(),i(27,"button",21),_("click",function(){let T=v(e).$implicit,F=c();return f(F.toggle(T._id))}),m(28,V,2,0,"svg",22)(29,j,2,0,"svg",22),n()()(),m(30,G,1,0,"div",23),n()}if(r&2){let e=t.$implicit,s=c();l(7),a("#",e._id),l(6),b(e.user.name||"\u2014"),l(2),a("Placed: ",e.createdAt),l(2),d("ngClass",h(14,B,e.isPaid,!e.isPaid&&!e.isDelivered,e.isDelivered===!1&&e.isPaid===!1)),l(),a(" ",e.isPaid?"Paid":"Unpaid"," "),l(),d("ngClass",w(18,N,e.isDelivered,!e.isDelivered)),l(),a(" ",e.isDelivered?"Delivered":"Not delivered"," "),l(5),a(" ",C(26,11,e.totalOrderPrice,"1.0-2")," EGP "),l(3),d("ngIf",!s.expanded[e._id]),l(),d("ngIf",s.expanded[e._id]),l(),d("ngIf",s.expanded[e._id])}}var P=class r{allOrders=[];expanded={};cartService=g(D);ngOnInit(){this.getAllOrders()}getAllOrders(){this.cartService.getAllOrders().subscribe({next:t=>{this.allOrders=Array.isArray(t)?t:t.data||[],Array.isArray(this.allOrders)?this.expanded=this.allOrders.reduce((e,s)=>(e[s._id]=!1,e),{}):this.allOrders=[],console.log("allOrders:",this.allOrders)},error:t=>console.error("Error fetching orders:",t)})}toggle(t){this.expanded[t]=!this.expanded[t]}trackById(t,e){return e._id}viewOrder(t){console.log("View order:",t)}downloadInvoice(t){console.log("Download invoice for order:",t)}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-allorders"]],decls:7,vars:3,consts:[[1,"mt-20"],[1,"max-w-7xl","mx-auto","px-2","sm:px-4","lg:px-8","py-6"],[1,"text-2xl","sm:text-3xl","font-bold","text-green-600","mb-4","sm:mb-6"],["class","text-center py-10 sm:py-12",4,"ngIf"],[1,"space-y-4","sm:space-y-6"],["class","bg-white shadow-sm rounded-xl sm:rounded-2xl border border-gray-100 overflow-hidden",4,"ngFor","ngForOf","ngForTrackBy"],[1,"text-center","py-10","sm:py-12"],[1,"text-gray-500","text-sm","sm:text-base"],[1,"bg-white","shadow-sm","rounded-xl","sm:rounded-2xl","border","border-gray-100","overflow-hidden"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-3","px-3","sm:px-4","lg:px-6","py-3","sm:py-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:gap-4"],[1,"text-xs","sm:text-sm","text-gray-500"],[1,"block","font-semibold","text-gray-800","text-sm","sm:text-base"],[1,"hidden","sm:block","border-l","h-6","sm:h-8","mx-3"],[1,"text-xs","sm:text-sm","text-gray-600"],[1,"font-medium","text-gray-800"],[1,"text-gray-500"],[1,"flex","items-center","flex-wrap","gap-2","sm:gap-3"],[1,"px-2.5","py-0.5","rounded-full","text-xs","sm:text-sm","font-medium",3,"ngClass"],[1,"text-right"],[1,"text-sm","sm:text-lg","font-bold","text-green-600"],[1,"ml-1","sm:ml-2","p-1.5","sm:p-2","rounded-full","bg-gray-100","hover:bg-gray-200",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-4 w-4 sm:h-5 sm:w-5 text-gray-700","fill","none","viewBox","0 0 24 24","stroke","currentColor",4,"ngIf"],["class","border-t border-gray-100 px-3 sm:px-4 lg:px-6 py-4 sm:py-6",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4","sm:h-5","sm:w-5","text-gray-700"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 9l-7 7-7-7"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 15l7-7 7 7"],[1,"border-t","border-gray-100","px-3","sm:px-4","lg:px-6","py-4","sm:py-6"]],template:function(e,s){e&1&&(i(0,"section",0)(1,"div",1)(2,"h1",2),o(3,"My Orders"),n(),m(4,M,3,0,"div",3),i(5,"div",4),m(6,$,31,21,"div",5),n()()()),e&2&&(l(4),d("ngIf",!s.allOrders||s.allOrders.length===0),l(2),d("ngForOf",s.allOrders)("ngForTrackBy",s.trackById))},dependencies:[E,I,A,S,k],encapsulation:2})};export{P as AllordersComponent};
